#!/bin/bash

# List of Pokémon to retrieve data for
POKEMON_LIST=("bulbasaur" "ivysaur" "venusaur" "charmander" "charmeleon")

# Base URL for the Pokémon API
BASE_URL="https://pokeapi.co/api/v2/pokemon"

# Directory for saving JSON files
OUTPUT_DIR="pokemon_data"

# Create output directory if it doesn't exist
mkdir -p "$OUTPUT_DIR"

# Function to fetch data for a single Pokémon
fetch_data() {
    local POKEMON="$1"
    local URL="$BASE_URL/$POKEMON"
    local output_file="$OUTPUT_DIR/$POKEMON.json"

    echo "Fetching data for $POKEMON..."
    curl -s "$URL" -o "$output_file"

    # Check if the curl command was successful
    if [[ $? -eq 0 && -s "$output_file" ]]; then
        echo "Data for $POKEMON retrieved successfully and saved to $output_file."
    else
        echo "Error: Unable to retrieve data for $POKEMON." >> errors.txt
    fi
}

# Loop through each Pokémon in parallel
for POKEMON in "${POKEMON_LIST[@]}"; do
    fetch_data "$POKEMON" &
done

# Wait for all background processes to complete
wait

echo "All data retrieval processes completed."

# Check for the use of jobs in the script
if ! grep -q 'jobs' "$0"; then
    echo "Error: This script doesn't contain the use of 'jobs'." >> errors.txt
fi

# Check for the use of kill in the script (optional if you want to include it)
if ! grep -q 'kill' "$0"; then
    echo "Error: This script doesn't contain the use of 'kill'." >> errors.txt
fi
